<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mock Day-Trading Simulator with RSI and Dashboard</title>
<style>
  body { font-family: Arial, sans-serif; background: #f2f4f7; margin: 0; padding: 20px; }
  h1 { text-align: center; }
  .dashboard { display: flex; justify-content: space-around; background: #fff; padding: 10px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); margin-bottom: 15px; }
  .metric { text-align: center; font-weight: bold; }
  .profit { color: #4caf50; }
  .loss { color: #f44336; }
  .stock-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
  .stock-card { background: white; border-radius: 10px; padding: 15px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
  canvas { width: 100%; height: 120px; background: #fff; border-radius: 6px; }
  .controls { display: flex; justify-content: space-between; margin-top: 10px; }
  button { padding: 5px 10px; border: none; border-radius: 6px; cursor: pointer; }
  .buy { background: #4caf50; color: white; }
  .sell { background: #f44336; color: white; }
  .hold { background: #999; color: white; }
  .trend-box { overflow-x: auto; white-space: nowrap; background: #eef; border-radius: 8px; padding: 8px; margin-top: 10px; }
  .rsi-bar { height: 8px; border-radius: 4px; margin-top: 6px; }
  .rsi-text { font-size: 0.8em; text-align: center; margin-top: 2px; }
</style>
</head>
<body>
<h1>Mock Day-Trading Simulator ðŸ“Š</h1>
<div class="dashboard">
  <div class="metric">ðŸ’° Funds: â‚¹<span id="funds">10000</span></div>
  <div class="metric">ðŸ“¦ Holdings: â‚¹<span id="holdings">0</span></div>
  <div class="metric">ðŸ’¹ Net Value: â‚¹<span id="netValue">10000</span></div>
  <div class="metric">ðŸ“Š P/L: <span id="pl" class="neutral">0</span></div>
  <div class="metric">â›” Stop-Loss Active: <span id="slCount">0</span></div>
</div>
<div class="stock-container" id="stocks"></div><script>
const stocks = ['U','V','W','X','Y','Z'];
let funds = 10000;
const portfolio = {};
const stockData = {};

stocks.forEach(s => {
  stockData[s] = Array.from({length: 60}, () => 100 + Math.random()*20);
  portfolio[s] = { quantity: 0, avgPrice: 0, stopLoss: null };
});

function getSMA(values, period) {
  if (values.length < period) return null;
  const subset = values.slice(-period);
  return subset.reduce((a,b)=>a+b,0)/period;
}

function calculateRSI(values, period=14) {
  if (values.length < period+1) return 50;
  let gains=0, losses=0;
  for (let i=values.length-period; i<values.length; i++) {
    let diff = values[i] - values[i-1];
    if (diff>0) gains+=diff; else losses-=diff;
  }
  if (losses===0) return 100;
  const rs = gains/losses;
  return 100 - (100 / (1 + rs));
}

function simulatePrice(oldPrice) {
  let change = (Math.random()-0.5)*2;
  return Math.max(50, oldPrice + change);
}

function drawChart(ctx, values) {
  const width = ctx.canvas.width;
  const height = ctx.canvas.height;
  ctx.clearRect(0,0,width,height);
  const max = Math.max(...values);
  const min = Math.min(...values);
  ctx.beginPath();
  ctx.strokeStyle = '#2196f3';
  values.forEach((v,i)=>{
    const x = (i/values.length)*width;
    const y = height - ((v-min)/(max-min))*height;
    if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  });
  ctx.stroke();
}

function updateDashboard() {
  let holdingsValue = 0;
  let stopCount = 0;
  let invested = 0;
  stocks.forEach(symbol => {
    const price = stockData[symbol][stockData[symbol].length-1];
    const { quantity, avgPrice, stopLoss } = portfolio[symbol];
    if (quantity > 0) {
      holdingsValue += quantity * price;
      invested += quantity * avgPrice;
    }
    if (stopLoss) stopCount++;
  });
  const netValue = funds + holdingsValue;
  const pl = holdingsValue - invested;

  document.getElementById('funds').textContent = funds.toFixed(2);
  document.getElementById('holdings').textContent = holdingsValue.toFixed(2);
  document.getElementById('netValue').textContent = netValue.toFixed(2);

  const plElem = document.getElementById('pl');
  plElem.textContent = pl.toFixed(2);
  plElem.className = pl > 0 ? 'profit' : pl < 0 ? 'loss' : 'neutral';
  document.getElementById('slCount').textContent = stopCount;
}

function update() {
  stocks.forEach(symbol => {
    const data = stockData[symbol];
    data.push(simulatePrice(data[data.length-1]));
    if (data.length > 100) data.shift();

    const sma5 = getSMA(data,5);
    const sma20 = getSMA(data,20);
    const rsi = calculateRSI(data);
    let action = 'Hold';
    if (sma5 && sma20) {
      if (sma5 > sma20 && rsi < 70) action = 'Buy';
      else if (sma5 < sma20 && rsi > 30) action = 'Sell';
    }

    const card = document.getElementById('card-'+symbol);
    const ctx = document.getElementById('chart-'+symbol).getContext('2d');
    drawChart(ctx, data);

    const rsiBar = card.querySelector('.rsi-bar');
    if (rsi > 70) rsiBar.style.background = '#f44336';
    else if (rsi < 30) rsiBar.style.background = '#4caf50';
    else rsiBar.style.background = '#999';
    card.querySelector('.rsi-text').textContent = `RSI: ${rsi.toFixed(1)} (${rsi>70?'Overbought':rsi<30?'Oversold':'Neutral'})`;

    const trend = card.querySelector('.trend');
    trend.textContent += `${action} â†’ `;

    const stopLoss = portfolio[symbol].stopLoss;
    const currentPrice = data[data.length-1];
    if (stopLoss && currentPrice < stopLoss && portfolio[symbol].quantity>0) {
      funds += portfolio[symbol].quantity * currentPrice;
      portfolio[symbol].quantity = 0;
      portfolio[symbol].stopLoss = null;
      alert(symbol+' triggered Stop-Loss at â‚¹'+currentPrice.toFixed(2));
    }
  });
  updateDashboard();
}

function render() {
  const container = document.getElementById('stocks');
  stocks.forEach(symbol => {
    const div = document.createElement('div');
    div.className = 'stock-card';
    div.id = 'card-'+symbol;
    div.innerHTML = `
      <h3>Stock ${symbol}</h3>
      <canvas id="chart-${symbol}" width="260" height="120"></canvas>
      <div class="controls">
        <button class="buy" onclick="buyStock('${symbol}')">Buy</button>
        <button class="sell" onclick="sellStock('${symbol}')">Sell</button>
        <button class="hold" onclick="setStopLoss('${symbol}')">Stop-Loss</button>
      </div>
      <div class="trend-box"><span class="trend"></span></div>
      <div class="rsi-bar"></div>
      <div class="rsi-text"></div>
    `;
    container.appendChild(div);
  });
}

function buyStock(symbol) {
  const price = stockData[symbol][stockData[symbol].length-1];
  if (funds >= price) {
    funds -= price;
    const p = portfolio[symbol];
    p.avgPrice = ((p.avgPrice * p.quantity) + price) / (p.quantity + 1);
    p.quantity += 1;
  }
}

function sellStock(symbol) {
  const price = stockData[symbol][stockData[symbol].length-1];
  const p = portfolio[symbol];
  if (p.quantity > 0) {
    funds += p.quantity * price;
    p.quantity = 0;
    p.avgPrice = 0;
  }
}

function setStopLoss(symbol) {
  const price = stockData[symbol][stockData[symbol].length-1];
  const stop = parseFloat(prompt('Set Stop-Loss for '+symbol+' (current â‚¹'+price.toFixed(2)+')'));
  if (!isNaN(stop)) portfolio[symbol].stopLoss = stop;
}

render();
setInterval(update, 1000);
</script></body>
</html>
